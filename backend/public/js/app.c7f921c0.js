(function(t){function e(e){for(var r,a,o=e[0],c=e[1],l=e[2],p=0,d=[];p<o.length;p++)a=o[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&d.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(d.length)d.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(r=!1)}r&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},s=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0a2c":function(t,e,n){"use strict";n("241b")},"241b":function(t,e,n){},"281f":function(t,e,n){t.exports=n.p+"img/loader.56953f46.svg"},"3ed1":function(t,e,n){},"3fac":function(t,e,n){},"41ec":function(t,e,n){"use strict";n("f309")},"55bd":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.isViewMode?t._e():n("app-header",{on:{openSignupModal:function(e){t.showModal=!0}}}),n("router-view"),t.showModal?n("sign-up",{on:{closeSignupModal:function(e){t.showModal=!1}}}):t._e()],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"app-header flex space-between"},[n("div",{staticClass:"logo place-center flex",on:{click:t.pushHome}},[n("i",{staticClass:"fas fa-hammer fa-2x"}),t._v("Web"),n("span",{staticClass:"logo-span"},[t._v("craft")])]),n("div",{staticClass:"nav-links flex align-center"},[n("router-link",{attrs:{to:"/",exact:""}},[t._v("Home")]),n("router-link",{attrs:{to:"/wap",exact:""}},[t._v("Templates")]),n("router-link",{attrs:{to:"/editor",exact:""}},[t._v("Editor")]),t.loggedInUser?t._e():n("a",{staticClass:"cursor",on:{click:t.showSignup}},[t._v("Login")]),t.loggedInUser?n("avatar",{attrs:{username:t.loggedInUser.username,imgUrl:t.loggedInUser.imgUrl,size:40,color:"#124a76"},nativeOn:{click:function(e){return t.toggleModal(e)}}}):t._e()],1),t.showModal?n("avatar-modal",{attrs:{loggedInUser:t.loggedInUser},on:{closeModal:function(e){t.showModal=!1}}}):t._e()],1)},o=[],c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar",style:{width:t.size+"px",height:t.size+"px",backgroundColor:t.imgUrl?"":t.color,lineHeight:t.size+"px"}},[t.username&&!t.imgUrl?n("span",[t._v(t._s(t.computeName)+" ")]):n("img",{attrs:{src:t.imgUrl}})])},l=[],u=(n("a15b"),n("d81d"),n("a9e3"),n("ac1f"),n("1276"),{name:"avatar",props:{username:{type:String},imgUrl:{type:String},size:{type:Number},color:{type:String}},computed:{computeName:function(){return this.username.split(" ").map((function(t){return t.charAt(0)})).join("").toUpperCase()}},created:function(){console.log("img url:",this.imgUrl)}}),p=u,d=(n("be72"),n("2877")),m=Object(d["a"])(p,c,l,!1,null,null,null),f=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loggedInUser?n("section",{staticClass:"avatar-modal flex column align-center"},[n("div",{staticClass:"info flex column align-center"},[n("avatar",{attrs:{username:t.loggedInUser.username,imgUrl:t.loggedInUser.imgUrl,size:65,color:"#124a76"}}),n("h3",[t._v(t._s(t.loggedInUser.username))]),n("span",[t._v(t._s(t.loggedInUser.email))])],1),n("div",{staticClass:"seperator"}),n("section",{staticClass:"modal-links flex column"},[n("router-link",{staticClass:"profile-btn",attrs:{to:"/user/"+t.loggedInUser._id}},[n("i",{staticClass:"fas fa-user"}),t._v(" Profile")]),t.loggedInUser?n("span",{staticClass:"profile-btn",on:{click:t.logout}},[n("i",{staticClass:"fas fa-times-circle"}),t._v(" Logout")]):t._e()],1)]):t._e()},g=[],v={name:"avatar-modal",props:{loggedInUser:Object},components:{avatar:f},methods:{logout:function(){this.$store.dispatch({type:"logout"}),this.$emit("closeModal"),this.$router.push("/").catch((function(){}))}}},b=v,w=Object(d["a"])(b,h,g,!1,null,null,null),C=w.exports,y={name:"app-header",data:function(){return{showModal:!1}},methods:{toggleModal:function(){this.showModal=!this.showModal},pushHome:function(){this.$router.push("/")},showSignup:function(){this.$emit("openSignupModal")}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},components:{avatar:f,avatarModal:C}},_=y,x=Object(d["a"])(_,a,o,!1,null,null,null),k=x.exports,S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"container flex align-center justify-center"},[r("div",{staticClass:"flex align-center justify-center screen",on:{click:t.closeModal}}),r("section",{staticClass:"signup-modal"},[r("div",{staticClass:"forms-container flex"},[r("div",{staticClass:"signin-signup"},[r("h2",{staticClass:"title"},[t._v(t._s(t.modalHeader))]),r("form",{staticClass:"flex column align-center",on:{submit:function(e){return e.preventDefault(),t.modalAction(e)}}},[t.isSignup?r("div",{staticClass:"form-control"},[r("span",{staticClass:"fas fa-user"}),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],attrs:{type:"text",placeholder:"Enter Username",required:""},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}})]):t._e(),r("div",{staticClass:"form-control"},[t._m(0),r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text",placeholder:"Enter Email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),r("div",{staticClass:"form-control"},[r("span",{staticClass:"cursor fas fa-lock",on:{click:t.toggleFieldType}}),"checkbox"===t.passwordType?r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{placeholder:"Enter Password",required:"",type:"checkbox"},domProps:{checked:Array.isArray(t.user.password)?t._i(t.user.password,null)>-1:t.user.password},on:{change:function(e){var n=t.user.password,r=e.target,i=!!r.checked;if(Array.isArray(n)){var s=null,a=t._i(n,s);r.checked?a<0&&t.$set(t.user,"password",n.concat([s])):a>-1&&t.$set(t.user,"password",n.slice(0,a).concat(n.slice(a+1)))}else t.$set(t.user,"password",i)}}}):"radio"===t.passwordType?r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{placeholder:"Enter Password",required:"",type:"radio"},domProps:{checked:t._q(t.user.password,null)},on:{change:function(e){return t.$set(t.user,"password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],attrs:{placeholder:"Enter Password",required:"",type:t.passwordType},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),r("button",{staticClass:"btn signup"},[t._v(t._s(t.modalHeader))])]),r("a",{staticClass:"btn toggle-modal-btn",on:{click:t.toggleModalMode}},[t._v(t._s(t.link))])]),r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{xmlns:"http://www.w3.org/2000/svg",d:"M306.5 -31.4999L882 -31.4998C999 -31.4997 999 -151.22 999 -10V480.5V1082.5C999 1347.06 553.889 1094.34 212.5 932.5C-67.0003 800 -42.9294 593.465 125.001 266C285 -45.9997 206.667 -14.9999 306.5 -31.4999Z",fill:"#04befe"}}),r("defs",[r("linearGradient",{attrs:{id:"paint0_linear",x1:"1038.17",y1:"-8.72305",x2:"223.672",y2:"689.277",gradientUnits:"userSpaceOnUse"}},[r("stop",{attrs:{"stop-color":"#38D39F"}}),r("stop",{attrs:{offset:"1","stop-color":"#38A4D3"}})],1)],1)]),r("img",{staticClass:"svg-img",attrs:{src:n("af84")}})]),r("button",{staticClass:"btn close-btn",on:{click:t.closeModal}},[r("i",{staticClass:"fas fa-times"})])])])},T=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("i",{staticClass:"fas fa-envelope"})])}],E=(n("96cf"),n("1da1")),$=(n("99af"),n("bc3a")),I=n.n($),O="/api/",U=I.a.create({withCredentials:!0}),j={get:function(t,e){return M(t,"GET",e)},post:function(t,e){return M(t,"POST",e)},put:function(t,e){return M(t,"PUT",e)},delete:function(t,e){return M(t,"DELETE",e)}};function M(t){return P.apply(this,arguments)}function P(){return P=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"get",r=s.length>2&&void 0!==s[2]?s[2]:null,t.prev=2,t.next=5,U({url:"".concat(O).concat(e),method:n,data:r});case 5:return i=t.sent,t.abrupt("return",i.data);case 9:throw t.prev=9,t.t0=t["catch"](2),401===t.t0.response.status&&router.push("/"),console.log("Had issues ".concat(n,"ing to server"),t.t0),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,9]])}))),P.apply(this,arguments)}var R={login:W,signup:D,getEmptyUser:G,logout:z,getById:q,getLoggedinUser:Z,update:B,getUsers:N,remove:V};function W(t){return L.apply(this,arguments)}function L(){return L=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("user creds on service",e),t.prev=1,t.next=4,j.post("auth/login",e);case 4:return n=t.sent,console.log("user get back from db:",n),t.abrupt("return",J(n));case 9:throw t.prev=9,t.t0=t["catch"](1),console.log("🚀 ~ file: user.service.js ~ line 22 ~ login ~ error",t.t0.response),r=t.t0.response.data.msg,r;case 14:case"end":return t.stop()}}),t,null,[[1,9]])}))),L.apply(this,arguments)}function D(t){return A.apply(this,arguments)}function A(){return A=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("signup to server",e),t.next=3,j.post("auth/signup",e);case 3:return n=t.sent,t.abrupt("return",J(n));case 5:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}function N(){return j.get("user")}function V(t){return j.delete("user/".concat(t))}function z(){return F.apply(this,arguments)}function F(){return F=Object(E["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("doing logout"),t.next=3,j.post("auth/logout");case 3:sessionStorage.clear();case 4:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)}function q(t){return H.apply(this,arguments)}function H(){return H=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("user Id in service?:",e),console.log("userid from frontend:",e),t.next=4,j.get("user/".concat(e));case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function J(t){return sessionStorage.setItem("user",JSON.stringify(t)),t}function B(t){return console.log("getting user:",t),j.put("user/".concat(t._id),t)}function Z(){var t=sessionStorage.getItem("user");return t?JSON.parse(t):null}function G(){return{username:"",password:"",email:""}}var Y={name:"sign-up",data:function(){return{passwordType:"password",isSignup:!1,user:null}},methods:{toggleModalMode:function(){this.isSignup=!this.isSignup,this.isSignup?this.user=R.getEmptyUser():this.user={email:"",password:""}},modalAction:function(){this.isSignup?this.signup(this.user):this.login(this.user)},signup:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t.user)),e.next=3,t.$store.dispatch({type:"signup",userCreds:n});case 3:t.closeModal(),t.user=R.getEmptyUser();case 5:case"end":return e.stop()}}),e)})))()},login:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=JSON.parse(JSON.stringify(t.user)),e.next=3,t.$store.dispatch({type:"login",userCreds:n});case 3:r=e.sent,r&&t.closeModal(),t.user={email:"",password:""};case 6:case"end":return e.stop()}}),e)})))()},toggleFieldType:function(){this.passwordType="password"===this.passwordType?"text":"password"},closeModal:function(){this.$emit("closeSignupModal")}},computed:{modalHeader:function(){return this.isSignup?"Sign Up":"Login"},modelMode:function(){return this.isSignup?"user.username":"user.email"},link:function(){return this.isSignup?"Already have an account? Sign in!":"You dont have an account? Sign up!"}},created:function(){this.user=R.getEmptyUser()}},K=Y,X=Object(d["a"])(K,S,T,!1,null,null,null),Q=X.exports,tt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},et=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"loader-container"},[r("img",{staticClass:"loader",attrs:{src:n("281f"),alt:""}})])}],nt={name:"loader"},rt=nt,it=(n("41ec"),Object(d["a"])(rt,tt,et,!1,null,"424a382a",null)),st=it.exports,at={data:function(){return{showModal:!1}},components:{appHeader:k,signUp:Q,loader:st},computed:{isViewMode:function(){return this.$store.getters.isViewMode},toggleSignupModal:function(){this.showModal=!this.showModal},isLoading:function(){return this.$store.getters.isLoading}}},ot=at,ct=Object(d["a"])(ot,i,s,!1,null,null,null),lt=ct.exports,ut=n("8c4f"),pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"content-wrapper main-layout"},[r("div",{staticClass:"main-hero flex full"},[r("h1",[t._v("Build a website easily!")]),r("img",{staticClass:"hero-img",attrs:{src:n("b617")}}),r("button",{staticClass:"home-btn hero-btn btn",on:{click:t.pushEditor}},[t._v("Start Building")])]),r("div",{staticClass:"home-card flex"},[r("div",{staticClass:"card-content flex column space-between"},[r("span",{staticClass:"home-tag"},[t._v("Imagination")]),r("h2",{staticClass:"title"},[t._v("Build your own websites that you can be proud of!")]),r("p",[t._v(" Our platform will let you build you own websites using only your imagination. Webcraft empowers you to to build professional, custom websites in a completely visual canvas. ")]),r("button",{staticClass:"home-btn btn",on:{click:t.pushEditor}},[t._v("Lets Create")])]),r("img",{staticClass:"card-img",attrs:{src:"https://imagizer.imageshack.com/img924/8105/aLPK9v.png"}})]),r("div",{staticClass:"home-card flex"},[r("div",{staticClass:"card-content flex column space-between"},[r("span",{staticClass:"home-tag"},[t._v("Accessibility")]),r("h2",{staticClass:"title"},[t._v("Suited for all your needs")]),r("p",{staticClass:"intro-text"},[t._v(" Suited for any of your needs Design and build your own high-quality websites. Whether you’re promoting your business, showcasing your work, opening your store or starting a blog—you can do it all with the Webcraft website editor. ")]),r("button",{staticClass:"home-btn btn",on:{click:t.pushTemplate}},[t._v("Check Templates")])]),r("img",{staticClass:"card-img",attrs:{src:"https://imagizer.imageshack.com/img922/6240/9IpCzn.png"}})]),r("div",{staticClass:"home-card flex"},[r("div",{staticClass:"card-content flex column space-between"},[r("span",{staticClass:"home-tag"},[t._v("Just Drag")]),r("h2",{staticClass:"title"},[t._v("Just Drag & Drop")]),t._m(0),r("button",{staticClass:"home-btn btn",on:{click:t.pushEditor}},[t._v("Give It A Try")])]),r("img",{staticClass:"card-img",attrs:{src:"https://imagizer.imageshack.com/img924/328/88wVuo.png"}})])])},dt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"intro-text"},[t._v(" With a simple and drag and drop website builder, you can design any website you want. Just "),n("span",[t._v("Drag")]),t._v(", "),n("span",[t._v("Drop")]),t._v(" and "),n("span",[t._v("Customise!")]),t._v(" All the templates below were built using the Webcraft platform. ")])}],mt={name:"home",components:{loader:st},methods:{pushEditor:function(){this.$router.push("/editor")},pushTemplate:function(){this.$router.push("/wap")}}},ft=mt,ht=Object(d["a"])(ft,pt,dt,!1,null,null,null),gt=ht.exports,vt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor-container flex column",class:t.isEditorShown},[t.currWap?n("editor-dashboard",{attrs:{wapTree:t.wapTree,samples:t.samples,cmpToEdit:t.currCmpToEdit},on:{switchedTab:t.emptyCmpToEdit,vidChanged:t.setChangedVid,mapZoomChanged:t.emitChangedZoom,saveWap:t.saveWap,focusedCmp:t.setCmpToEdit,copiedCmp:t.copyCmp,deletedCmp:t.deleteCmp,movedCmp:t.moveCmp,openPublishModal:t.publishWebsite,saveSample:t.saveSample}},[n("toggle-editor",{staticClass:"btn toggle-dashboard",attrs:{slot:"toggle-editor-btn",isEditorShow:this.isEditorShow},on:{toggled:t.toggleEditor},slot:"toggle-editor-btn"})],1):t._e(),!t.isLoading&&t.currWap?n("editor-workspace",{attrs:{cmps:t.currWap.cmps},on:{focusedCmp:t.setCmpToEdit,updatedTxt:t.updateTxt,copy:t.copySection,moveSection:t.moveSection,droppedSample:t.dropSample,droppedSection:t.dropSection,delete:t.deleteSection}}):n("loader"),t.showPublishModal?n("publish-modal",{attrs:{currWebsiteLink:t.currWebsiteLink},on:{closePublishModal:t.togglePublishModal}}):t._e()],1)},bt=[],wt=(n("7db0"),n("c740"),n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor-dashboard"},[n("section",{staticClass:"tab-container flex"},t._l(t.tabs,(function(e){return n("button",{key:e,staticClass:"btn flex column align-center tab-btn",class:{selected:t.currTab===e},on:{click:function(n){return t.toggleTabs(e)}}},[t._v(" "+t._s(e)+" ")])})),0),t._t("toggle-editor-btn"),n("section",{staticClass:"dashboard-container"},[n(t.currDashboard,{tag:"component",staticClass:"editor-body",attrs:{samples:t.samples,cmpToEdit:t.cmpToEdit,wapTree:t.wapTree},on:{focused:t.emitFocusCmp,copied:t.emitCopyCmp,deleted:t.emitDeleteCmp,moved:t.emitMoveCmp,vidChanged:t.emitChangedVid,mapZoomChanged:t.emitChangedZoom}})],1),n("user-controls",{on:{saveWap:t.emitSaveWap,saveSample:t.emitSaveSample,openPublishModal:t.emitOpenPublishModal}})],2)}),Ct=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editors-container"},[t.cmpToEdit?[n("h1",{staticClass:"editor-name text-center"},[n("span",{class:t.editorIcon}),t._v(" "+t._s(t.editorTitle)+" ")]),n("div",{staticClass:"editor-branch-controls-btns"},[n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onDelete(e)}}},[n("i",{staticClass:"fas fa-trash"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onCopy(e)}}},[n("i",{staticClass:"fas fa-copy"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onMoveCmp(-1)}}},[n("i",{staticClass:"fas fa-angle-double-up"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onMoveCmp(1)}}},[n("i",{staticClass:"fas fa-angle-double-down"})])]),t.currEditor?n(t.renderedEditor,{tag:"component",attrs:{cmpToEdit:t.cmpToEdit},on:{uploading:t.emitUploadImg,vidChanged:t.emitChangedVid,mapZoomChanged:t.emitChangedZoom}}):t._e()]:n("div",{staticClass:"editor-message flex justify-center"},[n("h1",[t._v("Please click on an element to edit")])])],2)},_t=[],xt=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"text-editor flex column align-center"},[t.isLink?n("div",{staticClass:"editor-link-container flex column align-center"},[n("p",{staticClass:"editor-txt"},[t._v("Attach an external link to this button:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.cmpToEdit.href,expression:"cmpToEdit.href"}],attrs:{type:"text",placeholder:"Insert a link"},domProps:{value:t.cmpToEdit.href},on:{input:function(e){e.target.composing||t.$set(t.cmpToEdit,"href",e.target.value)}}}),n("i",{staticClass:"fas fa-link"})]):t._e(),t.cmpToEdit?n("div",{staticClass:"ranges-container flex column align-center"},[n("my-select",{staticClass:"custom-select",attrs:{options:t.fonts},on:{change:t.setFontFamily}}),n("p",{staticClass:"editor-txt"},[t._v("Font Size")]),n("my-range",{attrs:{options:{initVal:t.fontSize,min:1,max:72}},on:{input:t.setFontSize}}),n("p",{staticClass:"editor-txt"},[t._v("Line Height")]),n("my-range",{attrs:{options:{initVal:2.5*+t.cmpToEdit.style.lineHeight,min:0,max:20}},on:{input:t.setLineHeight}}),n("p",{staticClass:"editor-txt"},[t._v("Letter Spacing")]),n("my-range",{attrs:{options:{initVal:t.letterSpacing,min:0,max:30}},on:{input:t.setLetterSpacing}})],1):t._e(),n("div",{staticClass:"align-controls flex space-between"},[n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setTextAlign("left")}}},[n("i",{staticClass:"fas fa-align-left"})]),n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setTextAlign("center")}}},[n("i",{staticClass:"fas fa-align-center"})]),n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setTextAlign("right")}}},[n("i",{staticClass:"fas fa-align-right"})])]),n("div",{staticClass:"decoration-controls flex space-between"},[n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setTxtDecoration("underline")}}},[n("i",{staticClass:"fas fa-underline"})]),n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setFontStyle("italic")}}},[n("i",{staticClass:"fas fa-italic"})]),n("button",{staticClass:"btn align-btn",on:{click:function(e){return t.setFontWeight("bold")}}},[n("i",{staticClass:"fas fa-bold"})])]),n("p",{staticClass:"editor-txt"},[t._v("Text Color")]),n("color-picker",{on:{changeColor:t.setColor}})],1)}),kt=[],St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{staticClass:"custom-select user-input input-filter",attrs:{placeholder:"Select Font"},on:{change:t.emitChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,(function(t){return n("el-option",{key:t.value,style:"font-family:"+t.value+";",attrs:{label:t.label,value:t.value}})})),1)},Tt=[],Et={props:{options:Array},data:function(){return{value:""}},methods:{emitChange:function(){this.$emit("change",this.value)}}},$t=Et,It=Object(d["a"])($t,St,Tt,!1,null,null,null),Ot=It.exports,Ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"block custom-range"},[n("el-slider",{attrs:{max:t.options.max,min:t.options.min},on:{input:t.emitChange},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1)},jt=[],Mt={props:{options:Object},data:function(){return{value:this.options.initVal}},methods:{emitChange:function(){this.$emit("input",this.value)}}},Pt=Mt,Rt=Object(d["a"])(Pt,Ut,jt,!1,null,null,null),Wt=Rt.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"color-picker-container flex justify-center wrap"},[n("span",{staticClass:"color-circle transparent",on:{click:function(e){return t.onSelectColor("transparent")}}},[n("i",{staticClass:"far fa-times-circle fa-2x"})]),n("span",{staticClass:"color-circle white",class:t.colorSelected("white"),style:{backgroundColor:"white"},on:{click:function(e){return t.onSelectColor("white")}}}),n("span",{staticClass:"color-circle",class:t.colorSelected("black"),style:{backgroundColor:"black"},on:{click:function(e){return t.onSelectColor("black")}}}),t._l(t.currColorsPage,(function(e,r){return n("span",{key:r,staticClass:"color-circle",class:t.colorSelected(e),style:{backgroundColor:e},on:{click:function(n){return t.onSelectColor(e)}}})})),n("span",{staticClass:"color-circle next",on:{click:t.showMore}},[n("i",{staticClass:"far fa-arrow-alt-circle-right fa-2x"})])],2)},Dt=[],At=(n("fb6a"),n("6890")),Nt=n("2ef0"),Vt={name:"color-picker",data:function(){return{colors:Nt.flatten(At),pageNum:0,pageSize:20,selectedColor:null}},methods:{colorSelected:function(t){return{selected:this.selectedColor===t}},onSelectColor:function(t){this.selectedColor=t,this.$emit("changeColor",t)},showMore:function(){this.pageNum*this.pageSize>=this.colors.length-this.pageSize?this.pageNum=0:this.pageNum+=1}},computed:{currColorsPage:function(){var t=this.pageNum*this.pageSize,e=t+this.pageSize;return this.colors.slice(t,e)}}},zt=Vt,Ft=(n("6a75"),Object(d["a"])(zt,Lt,Dt,!1,null,"538c25e2",null)),qt=Ft.exports,Ht={props:{cmpToEdit:{type:Object}},name:"text-editor",data:function(){return{fonts:[{label:"Arial",value:"Arial"},{label:"Helvetica",value:"Helvetica"},{label:"Georgia",value:"Georgia"},{label:"Monospace",value:"Monospace"},{label:"Cursive",value:"Cursive"},{label:"Ruhl",value:"ruhl"},{label:"Vibes",value:"Vibes"},{label:"Bungee",value:"bungee"},{label:"Carme",value:"carme"},{label:"Arbutus",value:"arbutus"},{label:"Poppins",value:"poppins"}]}},methods:{setFontFamily:function(t){this.cmpToEdit.style.fontFamily=t},setFontSize:function(t){this.cmpToEdit.style.fontSize=t+"px"},setLineHeight:function(t){this.cmpToEdit.style.lineHeight=t/2.5},setLetterSpacing:function(t){this.cmpToEdit.style.letterSpacing=t+"px"},setTxtDecoration:function(t){var e=this.cmpToEdit.style.textDecoration;this.cmpToEdit.style.textDecoration=e===t?"revert":t},setFontStyle:function(t){var e=this.cmpToEdit.style.fontStyle;this.cmpToEdit.style.fontStyle=e===t?"revert":t},setFontWeight:function(t){var e=this.cmpToEdit.style.fontWeight;this.cmpToEdit.style.fontWeight=e!==t?t:"normal"},setTextAlign:function(t){this.cmpToEdit.style.textAlign=t},setColor:function(t){this.cmpToEdit.style.color=t}},computed:{isLink:function(){return!!this.cmpToEdit&&"link"===this.cmpToEdit.name},fontSize:function(){var t=this.cmpToEdit.style.fontSize;return parseInt(t,10)},letterSpacing:function(){var t=this.cmpToEdit.style.letterSpacing;return parseInt(t,10)}},components:{mySelect:Ot,myRange:Wt,colorPicker:qt}},Jt=Ht,Bt=Object(d["a"])(Jt,xt,kt,!1,null,null,null),Zt=Bt.exports,Gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"section section-editor flex column align-center"},[n("p",{staticClass:"editor-txt"},[t._v("Set Round Edges:")]),n("my-range",{attrs:{options:{initVal:t.sectionRadius,min:0,max:50}},on:{input:t.setSectionRadius}}),"img"!==t.cmpToEdit.name?[n("p",{staticClass:"editor-txt"},[t._v("Set A Background Color")]),n("color-picker",{on:{changeColor:t.setColor}})]:t._e(),n("div",{staticClass:"img-uploader"},[t.showBgPreview?n("div",{staticClass:"preview",style:"background-color:"+t.cmpToEdit.style.background+";"},[t.cmpToEdit.imgUrl?n("img",{attrs:{src:t.cmpToEdit.imgUrl}}):t._e()]):t._e(),n("p",{staticClass:"editor-txt"},[t._v("Or Add An Image As A Background")]),n("label",{staticClass:"user-input input-file"},[n("i",{staticClass:"fas fa-cloud-upload-alt"}),n("input",{staticClass:"hide",attrs:{type:"file"},on:{change:t.emitUploadImg}})])]),n("img-search",{on:{setImg:t.setImg}})],2)},Yt=[],Kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"unsplash-search"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.searchImgs(e)}}},[n("div",{staticClass:"form-container flex justify-center"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.term,expression:"term",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Search Image..."},domProps:{value:t.term},on:{input:function(e){e.target.composing||(t.term=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._m(0)])]),n("div",{staticClass:"unsplash-imgs-container grid"},t._l(t.imgs,(function(e,r){return n("div",{key:r,staticClass:"unsplash-img-card"},[n("img",{staticClass:"unsplash-img",attrs:{src:e.thumb},on:{click:function(n){return t.onImgSelect(e)}}})])})),0)])},Xt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-search"},[n("i",{staticClass:"fas fa-search"})])}],Qt=(n("d3b7"),n("25f0"),n("2909")),te={applyDrag:ne,makeId:ee,getImgs:re,uploadImg:oe,videoSearch:se};function ee(){return Math.random().toString(36).substring(2,12)}function ne(t,e){var n=e.removedIndex,r=e.addedIndex,i=e.payload;if(null===n&&null===r)return t;var s=Object(Qt["a"])(t),a=i;return null!==n&&(a=s.splice(n,1)[0]),null!==r&&s.splice(r,0,a),s}function re(t){return ie.apply(this,arguments)}function ie(){return ie=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="DL-fOJKfzUbQ2irbF2Oleeza3GuX2LyJ-mVPCUJsJc8",t.next=3,I.a.get("https://api.unsplash.com/search/photos?page=1&per_page=30&query=".concat(e,"&client_id=").concat(n));case 3:return r=t.sent,i=r.data.results.map((function(t){return t.urls})),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),ie.apply(this,arguments)}function se(t){return ae.apply(this,arguments)}function ae(){return ae=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="AIzaSyAL9hmi8XD2yjr3qrRzuBNP33qgdy5bvss",t.next=3,I.a.get("https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=24&videoEmbeddable=true&type=video&key=".concat(n,"&q=").concat(e));case 3:return r=t.sent,i=r.data.items.map((function(t){var e=t.id.videoId,n=t.snippet.thumbnails.default.url,r=t.snippet.title;return{title:r.substring(0,10),videoId:e,thumbnail:n}})),t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),ae.apply(this,arguments)}function oe(t){return ce.apply(this,arguments)}function ce(){return ce=Object(E["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="tfdzm5iy",r="https://api.cloudinary.com/v1_1/dpro0mdti/image/upload",i=new FormData,i.append("file",e.target.files[0]),i.append("upload_preset",n),t.prev=5,t.next=8,I.a.post(r,i);case 8:return s=t.sent,t.abrupt("return",s.data);case 12:t.prev=12,t.t0=t["catch"](5),console.error("ERROR!",t.t0);case 15:case"end":return t.stop()}}),t,null,[[5,12]])}))),ce.apply(this,arguments)}var le={name:"img-search",data:function(){return{term:null,imgs:[]}},methods:{searchImgs:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te.getImgs(t.term);case 2:t.imgs=e.sent,t.term=null;case 4:case"end":return e.stop()}}),e)})))()},onImgSelect:function(t){this.$emit("setImg",t.regular)}},components:{}},ue=le,pe=Object(d["a"])(ue,Kt,Xt,!1,null,null,null),de=pe.exports,me={name:"section-editor",props:{cmpToEdit:{type:Object}},methods:{emitUploadImg:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,te.uploadImg(t);case 2:r=n.sent,e.cmpToEdit.style.background="url(".concat(r.url,") center / cover no-repeat"),e.cmpToEdit.imgUrl=r.url;case 5:case"end":return n.stop()}}),n)})))()},setColor:function(t){this.cmpToEdit.imgUrl&&(this.cmpToEdit.imgUrl=null),this.cmpToEdit.style.background=t},setImg:function(t){this.cmpToEdit.imgUrl=t,this.cmpToEdit.style.background="url(".concat(t,") center / cover no-repeat")},setSectionRadius:function(t){this.cmpToEdit.style.borderRadius=t+"px"}},computed:{sectionRadius:function(){var t=this.cmpToEdit.style.borderRadius;return parseInt(t,10)},showBgPreview:function(){return this.cmpToEdit.imgUrl||"transparent"!==this.cmpToEdit.style.background}},components:{myRange:Wt,colorPicker:qt,imgSearch:de}},fe=me,he=(n("8d80"),Object(d["a"])(fe,Gt,Yt,!1,null,"a835defc",null)),ge=he.exports,ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"misc-editor flex column align-center"},["iframe"===t.cmpToEdit.name?n("div",{staticClass:"video-editor flex align-center column"},[n("p",[t._v("Please enter a youtube link")]),n("form",{staticClass:"flex column",on:{submit:function(e){return e.preventDefault(),t.setVidUrl(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.vidUrl,expression:"vidUrl"}],attrs:{type:"text"},domProps:{value:t.vidUrl},on:{input:function(e){e.target.composing||(t.vidUrl=e.target.value)}}}),n("button",{staticClass:"video-btn"},[t._v("Change")]),t.isInvalid?n("h3",{staticClass:"warning-txt"},[t._v(" This link is invalid, please try another one. ")]):t._e()]),t.cmpToEdit.vidUrl?n("iframe",{attrs:{width:"270",height:"270",src:t.convertedUrl,frameBorder:"0"}}):t._e(),n("p",{staticClass:"normal-txt"},[t._v("Or search on YouTube")]),n("video-search",{on:{setVideo:t.setVideo}})],1):t._e(),"google-map"===t.cmpToEdit.name?n("div",{staticClass:"map-editor flex align-center column"},[n("form",{on:{submit:function(t){t.preventDefault()}}},[n("p",[t._v("Set Zoom")]),n("my-range",{attrs:{options:{initVal:t.zoom,min:1,max:20}},on:{input:t.setMapZoom}}),n("p",[t._v("Seach for a location:")]),n("input",{attrs:{type:"text",placeholder:"Type here"}}),n("button",{staticClass:"map-search-btn btn",attrs:{type:"submit"}},[t._v("Search")])],1)]):t._e()])},be=[],we=(n("caad"),n("2532"),n("466d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"video-search-container"},[n("form",{staticClass:"video-form flex column align-items",on:{submit:function(e){return e.preventDefault(),t.searchVideos(e)}}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.term,expression:"term",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:"Search videos..."},domProps:{value:t.term},on:{input:function(e){e.target.composing||(t.term=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._m(0)]),n("div",{staticClass:"video-thumb-container"},t._l(t.videos,(function(e,r){return n("div",{key:r,staticClass:"video-thumnbail"},[n("h4",{staticClass:"vid-title"},[t._v(t._s(e.title))]),n("img",{staticClass:"video-img",attrs:{src:e.thumbnail},on:{click:function(n){return t.onVideoSelect(e.videoId)}}})])})),0)])}),Ce=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-search video-search-btn"},[n("i",{staticClass:"fas fa-search"})])}],ye={name:"video-search",data:function(){return{term:"",videos:[]}},methods:{searchVideos:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,te.videoSearch(t.term);case 2:n=e.sent,console.log("videos from api:",n),t.videos=n,t.term="";case 6:case"end":return e.stop()}}),e)})))()},onVideoSelect:function(t){this.$emit("setVideo",t)}}},_e=ye,xe=Object(d["a"])(_e,we,Ce,!1,null,null,null),ke=xe.exports,Se=n("c1fd"),Te={name:"video-editor",data:function(){return{vidUrl:null,isInvalid:!1,zoom:null}},props:{cmpToEdit:Object},computed:{convertedUrl:function(){if(this.cmpToEdit.vidUrl.includes("?v=")){var t=this.cmpToEdit.vidUrl.split("?v=")[1];return"https://www.youtube.com/embed/".concat(t)}return this.cmpToEdit.vidUrl}},methods:{setMapZoom:function(t){console.log("zoomNum:",t),this.$emit("mapZoomChanged",t)},setVideo:function(t){var e="https://www.youtube.com/watch?v=".concat(t);this.vidUrl=e,this.setVidUrl()},setVidUrl:function(){this.matchYoutubeUrl(this.vidUrl)&&(this.isInvalid=!1,this.$emit("vidChanged",this.vidUrl))},matchYoutubeUrl:function(t){var e=this,n=/^(?:https?:\/\/)?(?:m\.|www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;if(t.match(n))return t.match(n)[1];this.isInvalid=!0,r&&clearTimeout(r);var r=setTimeout((function(){e.isInvalid=!1}),3e3);return!1}},components:{videoSearch:ke,myRange:Wt,inputNumber:Se["default"]},updated:function(t){console.log("maybe?",this.cmpToEdit.vidUrl)},created:function(){this.cmpToEdit.vidUrl&&(this.vidUrl=this.cmpToEdit.vidUrl),this.cmpToEdit.info&&(this.zoom=this.cmpToEdit.info.zoom)}},Ee=Te,$e=Object(d["a"])(Ee,ve,be,!1,null,null,null),Ie=$e.exports,Oe={name:"editors-container",props:{cmpToEdit:{type:Object}},data:function(){return{currEditor:null}},computed:{renderedEditor:function(){return this.currEditor+"-editor"},editorTitle:function(){if(this.cmpToEdit){var t=this.cmpToEdit.name;return"section"===t||"div"===t?"Section Editor":"txt"===t||"i"===t?"Text Editor":"link"===t?"Link Editor":"img"===t?"Image Editor":"iframe"===t?"Video Editor":"google-map"===t?"Map Editor":this.cmpToEdit.name+" Editor"}},editorIcon:function(){return"iframe"===this.cmpToEdit.name?"fab fa-youtube":"google-map"===this.cmpToEdit.name?"fas fa-map-marked-alt":void 0}},methods:{getEditorsName:function(){if(this.cmpToEdit){var t=this.cmpToEdit.name;this.currEditor="section"===t||"div"===t||"img"===t?"section":"iframe"===t||"google-map"===t?"video":"text"}},emitUploadImg:function(t){this.$emit("uploading",t)},emitChangedVid:function(t){this.$emit("vidChanged",t)},emitChangedZoom:function(t){this.$emit("mapZoomChanged",t)},onDelete:function(){this.$emit("deleted",this.cmpToEdit._id)},onCopy:function(){this.$emit("copied",this.cmpToEdit._id)},onMoveCmp:function(t){this.$emit("moved",this.cmpToEdit._id,t)}},updated:function(){this.getEditorsName()},created:function(){this.getEditorsName()},components:{textEditor:Zt,sectionEditor:ge,videoEditor:Ie}},Ue=Oe,je=Object(d["a"])(Ue,yt,_t,!1,null,null,null),Me=je.exports,Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"type-list flex column align-center"},[n("h1",[t._v("Pick an element")]),t.selectedType?t._e():n("div",{staticClass:"element-picker-container grid"},t._l(t.types,(function(e){return n("button",{key:e,on:{click:function(n){return t.pickType(e)}}},[t._v(" "+t._s(e)+" ")])})),0),t.selectedType?n("div",[n("span",[n("i",{staticClass:"fas fa-arrow-left",on:{click:t.emptyType}})]),n("sample-list",{attrs:{samples:t.filterdSamples}})],1):t._e()])},Re=[],We=(n("4de4"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sample-list"},[n("Container",{attrs:{behaviour:"copy","group-name":"editor","drag-class":"card-ghost","drop-class":"card-ghost-drop","get-child-payload":t.getChildPayload,"get-ghost-parent":t.getGhostParent}},t._l(t.samples,(function(e){return n("Draggable",{key:e._id},[n("div",{staticClass:"sample-preview flex column"},[n("h3",{staticClass:"sample-title"},[t._v(t._s(e.title))]),n("img",{attrs:{src:e.thumbnail}})])])})),1)],1)}),Le=[],De=n("3f7d"),Ae={name:"sample-list",props:{samples:{type:Array}},methods:{onDrop:function(t){this.$emit("droppedSample",t)},getChildPayload:function(t){return this.samples[t]},getGhostParent:function(){}},components:{Container:De["Container"],Draggable:De["Draggable"]}},Ne=Ae,Ve=Object(d["a"])(Ne,We,Le,!1,null,null,null),ze=Ve.exports,Fe={name:"type-list",props:{samples:{type:Array}},data:function(){return{types:["header","cards","footer","gallery","map","video","form","divider","text"],selectedType:null}},methods:{pickType:function(t){this.selectedType=t},emptyType:function(){this.selectedType=null}},computed:{filterdSamples:function(){var t=this;return this.samples.filter((function(e){return e.type===t.selectedType}))}},components:{sampleList:ze}},qe=Fe,He=Object(d["a"])(qe,Pe,Re,!1,null,null,null),Je=He.exports,Be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.wapTree?n("section",{staticClass:"data-tree"},[n("h1",{staticClass:"editor-name"},[t._v("Your websites data tree:")]),t._l(t.wapTree,(function(e){return n("tree-branch",{key:e._id,attrs:{cmp:e},on:{focused:t.emitFocusCmp,deleted:t.emitDeleteCmp,copied:t.emitCopyCmp,moved:t.emitMoveCmp}})}))],2):t._e()},Ze=[],Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"tree-branch"},[n("li",{staticClass:"tree-branch-name",class:{selected:t.isItemOpen},attrs:{id:"el-"+t.workerHoverClass},on:{focused:t.onFocus,deleted:t.onDelete,copied:t.onCopy,moved:t.onMoveCmp,click:function(e){return e.stopPropagation(),t.toggleAccordionItem(!t.isItemOpen)}}},[n("h3",[t._v(" "+t._s(t.cmpTitle)+" ")]),n("div",{staticClass:"branch-controls-btns"},[n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onFocus(t.cmp._id)}}},[n("i",{staticClass:"fas fa-pen"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onDelete(t.cmp._id)}}},[n("i",{staticClass:"fas fa-trash"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onCopy(t.cmp._id)}}},[n("i",{staticClass:"fas fa-copy"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onMoveCmp(t.cmp._id,-1)}}},[n("i",{staticClass:"fas fa-angle-double-up"})]),n("button",{staticClass:"btn branch-btn",on:{click:function(e){return e.stopPropagation(),t.onMoveCmp(t.cmp._id,1)}}},[n("i",{staticClass:"fas fa-angle-double-down"})])]),t.cmp.children&&t.isItemOpen?[n("transition-group",{attrs:{name:"open-branch"}}),t._l(t.cmp.children,(function(e){return n("tree-branch",{key:e._id,attrs:{slot:"branch-slot",cmp:e},on:{focused:t.onFocus,deleted:t.onDelete,copied:t.onCopy,moved:t.onMoveCmp},slot:"branch-slot"})})),n("transition-group")]:t._e()],2)])},Ye=[],Ke={name:"tree-branch",props:{cmp:{type:Object}},data:function(){return{items:[],open:null,isItemOpen:!1}},methods:{onFocus:function(t){this.$emit("focused",t)},onDelete:function(t){this.$emit("deleted",t)},onCopy:function(t){this.$emit("copied",t)},onMoveCmp:function(t,e){this.$emit("moved",t,e)},registerItem:function(t){this.items.push(t),null===this.open&&t.toggleAccordionItem(!0)},unregisterItem:function(t){this.open===t&&(this.open=null);var e=this.items.findIndex((function(e){return e._uid===t._uid}));this.items.splice(e,1)},setItemOpen:function(t,e){for(var n=0;n<this.items.length;n++){var r=this.items[n];!0===e&&r._uid!==t._uid&&r.toggleAccordionItem(!1)}this.open=!1===e?null:t},toggleAccordionItem:function(t){t!==this.isItemOpen&&(this.isItemOpen=t,this.$parent.setItemOpen(this,this.isItemOpen))}},computed:{cmpTitle:function(){if(this.cmp){var t=this.cmp.name;return"section"===t||"div"===t?"Section ":"txt"===t||"i"===t?"Text":"link"===t?"Link":"img"===t?"Image":"iframe"===t?"Video":"google-map"===t?"Map":this.cmp.name}},workerHoverClass:function(){return this.cmp._id}},beforeMount:function(){this.$parent.registerItem(this)},beforeDestroy:function(){this.$parent.unregisterItem(this),this.$el.removeEventListener("mouseover",(function(){}),!0),this.$el.removeEventListener("mouseleave",(function(){}),!0)},mounted:function(){var t=document.querySelectorAll("#el-".concat(this.cmp._id));this.$el.addEventListener("mouseover",(function(e){e.stopPropagation(),t[1].style.outline="2.5px dashed #124a76","div"!==t[1].localName&&"section"!==t[1].localName||(t[1].style.border="3px dashed #124a76");setTimeout((function(){t[1].style.outline=null,"div"!==t[1].localName&&"section"!==t[1].localName||(t[1].style.border=null)}),3e3)})),this.$el.addEventListener("mouseleave",(function(e){e.stopPropagation(),t[1].style.outline=null,"div"!==t[1].localName&&"section"!==t[1].localName||(t[1].style.border=null)}))}},Xe=Ke,Qe=Object(d["a"])(Xe,Ge,Ye,!1,null,null,null),tn=Qe.exports,en={name:"data-tree",props:{wapTree:{type:Array}},data:function(){return{items:[],open:null}},components:{treeBranch:tn},methods:{emitFocusCmp:function(t){this.$emit("focused",t)},emitDeleteCmp:function(t){this.$emit("deleted",t)},emitCopyCmp:function(t){this.$emit("copied",t)},emitMoveCmp:function(t,e){this.$emit("moved",t,e)},registerItem:function(t){this.items.push(t),null===this.open&&t.toggleAccordionItem(!0)},unregisterItem:function(t){this.open===t&&(this.open=null);var e=this.items.findIndex((function(e){return e._uid===t._uid}));this.items.splice(e,1)},setItemOpen:function(t,e){for(var n=0;n<this.items.length;n++){var r=this.items[n];!0===e&&r._uid!==t._uid&&r.toggleAccordionItem(!1)}this.open=!1===e?null:t}}},nn=en,rn=Object(d["a"])(nn,Be,Ze,!1,null,null,null),sn=rn.exports,an=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("section",{staticClass:"user-controls flex justify-center"},[n("button",{staticClass:"btn choice-btn save",on:{click:t.saveWap}},[t._v("Save")]),t.loggedInUser&&t.loggedInUser.isAdmin?n("button",{staticClass:"btn choice-btn save",on:{click:t.saveSample}},[t._v(" Save SAMPLE ")]):t._e(),n("button",{staticClass:"btn choice-btn",on:{click:t.openPublishModal}},[t._v(" Publish ")])])])},on=[],cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"modal-container"},[n("div",{staticClass:"flex align-center justify-center screen"}),n("section",{staticClass:"publish-modal-container"},[n("h1",{staticClass:"modal-title"},[t._v("Your Website Link:")]),n("button",{staticClass:"btn close-pub-btn",on:{click:t.closePublishModal}},[t._v("x")]),n("div",{staticClass:"publish-container-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.currWebsiteLink,expression:"currWebsiteLink"}],staticClass:"publish-input",attrs:{type:"text"},domProps:{value:t.currWebsiteLink},on:{input:function(e){e.target.composing||(t.currWebsiteLink=e.target.value)}}}),n("button",{staticClass:"btn copy-btn",on:{click:t.copyWebLink}},[n("i",{staticClass:"fas fa-clipboard"})]),t.isCopy?n("p",{staticClass:"text-center"},[t._v("Your Link Has Been Copied!")]):t._e()])])])},ln=[],un={name:"publish-modal",props:{currWebsiteLink:String},data:function(){return{isCopy:!1}},methods:{closePublishModal:function(){console.log("clicked"),this.$emit("closePublishModal")},copyWebLink:function(){var t=document.querySelector("body"),e=document.querySelector(".publish-input"),n=document.createElement("textarea");n.value=e.value,t.appendChild(n),n.select(),document.execCommand("copy"),n.remove(),this.isCopy=!0,this.restIsCopy()},restIsCopy:function(){var t=this;setTimeout((function(){t.isCopy=!1}),1500)}}},pn=un,dn=Object(d["a"])(pn,cn,ln,!1,null,null,null),mn=dn.exports,fn={name:"user-controls",data:function(){return{showPublishModal:!1}},methods:{saveWap:function(){this.$emit("saveWap")},openPublishModal:function(){this.$emit("openPublishModal")},saveSample:function(){console.log("go top here"),this.$emit("saveSample")}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUser}},components:{publishModal:mn}},hn=fn,gn=Object(d["a"])(hn,an,on,!1,null,null,null),vn=gn.exports,bn={name:"editor-dashboard",props:{cmpToEdit:{type:Object},wapTree:{type:Array},samples:{type:Array}},data:function(){return{currTab:"add",tabs:["tree","add","edit"]}},methods:{emitDeleteCmp:function(t){this.$emit("deletedCmp",t)},emitCopyCmp:function(t){this.$emit("copiedCmp",t)},emitMoveCmp:function(t,e){this.$emit("movedCmp",t,e)},toggleTabs:function(t){this.currTab=t,"edit"!==this.currTab&&this.$emit("switchedTab")},emitFocusCmp:function(t){var e=this;this.$emit("focusedCmp",t),setTimeout((function(){e.toggleTabs("edit")}),500)},emitChangedVid:function(t){this.$emit("vidChanged",t)},emitChangedZoom:function(t){this.$emit("mapZoomChanged",t)},emitSaveWap:function(){this.$emit("saveWap")},emitOpenPublishModal:function(){this.$emit("openPublishModal"),console.log("in editor dahsboard")},emitSaveSample:function(){console.log("in editgor"),this.$emit("saveSample")}},computed:{currDashboard:function(){return"tree"===this.currTab?"data-tree":"edit"===this.currTab?"editors-container":"type-list"}},updated:function(){this.cmpToEdit&&(this.currTab="edit")},components:{typeList:Je,editorsContainer:Me,dataTree:sn,userControls:vn}},wn=bn,Cn=Object(d["a"])(wn,wt,Ct,!1,null,null,null),yn=Cn.exports,_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"editor-workspace flex column",class:t.emptyWorkspace},[n("Container",{staticClass:"dnd-container",attrs:{"auto-scroll-enabled":"","group-name":"editor","drag-class":"card-ghost","drop-class":"card-ghost-drop","drop-placeholder":t.dropPlaceholderOptions,"get-child-payload":t.getChildPayload},on:{drop:t.onDrop}},t._l(t.cmps,(function(e){return n("Draggable",{key:e._id},[n("wap-worker",{attrs:{cmp:e},on:{copy:t.emitCopy,delete:t.emitDelete,focused:t.emitFocusCmp,updatedTxt:t.emitUpdateTxt,moveSection:t.emitMoveSection}})],1)})),1)],1)},xn=[],kn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.name,{tag:"component",staticClass:"worker-class",class:t.cmp.class,style:t.cmp.style,attrs:{info:t.getInfo,id:"el-"+t.workerHoverClass,frameborder:0,src:t.urlSrc,contenteditable:t.editable,allowfullscreen:t.video,placeholder:t.cmp.placeholder},on:{blur:t.updateTxt,focused:t.onFocus,ondragstart:t.imgDraggable,click:function(e){return e.stopPropagation(),e.preventDefault(),t.onFocus(t.cmp._id)}}},["section"===t.cmp.name?n("controls",{attrs:{_id:t.cmp._id},on:{copy:t.emitCopy,delete:t.emitDelete,moveSection:t.emitMoveSection}}):t._e(),t.vidOrMap?n("div",{staticClass:"misc-control",attrs:{slot:"misc-control"},slot:"misc-control"},[n("button",{staticClass:"iframe-btn btn",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.onFocus(t.cmp.children[0]._id)}}},[n("i",{staticClass:"fas fa-link"})])]):t._e(),t._v(" "+t._s(t.cmpTxt)+" "),t.cmp.children?t._l(t.cmp.children,(function(e){return n("wap-worker",{key:e._id,attrs:{cmp:e},on:{blur:t.updateTxt,focused:t.onFocus,updatedTxt:t.emitUpdateTxt}},[t._t("misc-control")],2)})):t._e()],2)},Sn=[],Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("GmapMap",{attrs:{center:t.getCoords,zoom:t.getZoom,"map-type-id":"terrain"}},t._l(t.markers,(function(e,r){return n("GmapMarker",{key:r,attrs:{position:e.position,clickable:!0,draggable:t.isDraggable},on:{click:function(n){t.center=e.position}}})})),1)},En=[],$n={name:"google-map",props:{info:Object},data:function(){return{markers:[{position:{lat:32.088028,lng:34.803222}}]}},methods:{},computed:{getCoords:function(){return{lat:this.info.position.lat,lng:this.info.position.lng}},getZoom:function(){return this.info.zoom},isDraggable:function(){return this.info.isDraggable}}},In=$n,On=Object(d["a"])(In,Tn,En,!1,null,null,null),Un=On.exports,jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"controls flex align-center"},[n("button",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.onDelete(e)}}},[n("i",{staticClass:"fas fa-trash"})]),n("button",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.onCopy(e)}}},[n("i",{staticClass:"fas fa-copy"})]),n("button",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.onMoveSection(-1)}}},[n("i",{staticClass:"fas fa-angle-double-up"})]),n("button",{staticClass:"btn",on:{click:function(e){return e.stopPropagation(),t.onMoveSection(1)}}},[n("i",{staticClass:"fas fa-angle-double-down"})])])},Mn=[],Pn={name:"controls",props:{_id:{type:String}},methods:{onCopy:function(){this.$emit("copy",this._id)},onDelete:function(){this.$emit("delete",this._id)},onMoveSection:function(t){this.$emit("moveSection",this._id,t)}}},Rn=Pn,Wn=(n("5cc4"),Object(d["a"])(Rn,jn,Mn,!1,null,"1f78c9d3",null)),Ln=Wn.exports,Dn={name:"wap-worker",props:{parentInfo:Object,cmp:{type:Object,required:!0},siteMode:{type:Boolean}},computed:{name:function(){var t=this.cmp.name;return"txt"===t?"span":"link"===t?"a":"vid"===t?"iframe":t},cmpTxt:function(){return this.cmp.txt||""},urlSrc:function(){return this.cmp.imgUrl?this.cmp.imgUrl:this.cmp.vidUrl?this.convertedUrl:""},convertedUrl:function(){if(this.cmp.vidUrl.includes("?v=")){var t=this.cmp.vidUrl.split("?v=")[1];return"https://www.youtube.com/embed/".concat(t)}return this.cmp.vidUrl},editable:function(){return"txt"===this.cmp.name||"link"===this.cmp.name},video:function(){return"iframe"===this.cmp.name},imgDraggable:function(){return"img"!==this.cmp.name||"return false"},workerHoverClass:function(){return this.cmp._id},getInfo:function(){if(this.cmp.info)return console.log("this cmp:",this.cmp),this.cmp.info},vidOrMap:function(){return"video-container"===this.cmp.class||"map-container"===this.cmp.class}},methods:{updateTxt:function(t){"txt"===this.cmp.name&&"link"===this.cmp.name&&this.$emit("updatedTxt",t.target.innerText)},emitUpdateTxt:function(t){this.$emit("updatedTxt",t)},onFocus:function(t){this.$emit("focused",t)},emitCopy:function(t){this.$emit("copy",t)},emitDelete:function(t){console.log("id:",t),this.$emit("delete",t)},emitMoveSection:function(t,e){this.$emit("moveSection",t,e)}},components:{googleMap:Un,controls:Ln}},An=Dn,Nn=Object(d["a"])(An,kn,Sn,!1,null,null,null),Vn=Nn.exports,zn={name:"editor-workspace",props:{cmps:{type:Array}},data:function(){return{dropPlaceholderOptions:{className:"drop-preview",animationDuration:"250",showOnTop:!1}}},components:{Container:De["Container"],Draggable:De["Draggable"],wapWorker:Vn},methods:{onDrop:function(t){null===t.removedIndex?this.$emit("droppedSample",t):this.$emit("droppedSection",t)},getChildPayload:function(t){return this.cmps[t]},emitFocusCmp:function(t){this.$emit("focusedCmp",t)},emitUpdateTxt:function(t){this.$emit("updatedTxt",t)},emitCopy:function(t){this.$emit("copy",t)},emitDelete:function(t){this.$emit("delete",t)},emitMoveSection:function(t,e){this.$emit("moveSection",t,e)}},computed:{emptyWorkspace:function(){return{"empty-workspace":!this.cmps||!this.cmps.length}}}},Fn=zn,qn=Object(d["a"])(Fn,_n,xn,!1,null,null,null),Hn=qn.exports,Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.reverseIcon,attrs:{id:"arrowAnim"},on:{click:t.toggleEditor}},[t._m(0)])},Bn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"arrow-btn"},[n("i",{staticClass:"fas fa-chevron-left"})])}],Zn={name:"toggle-editor",props:{isEditorShow:Boolean},methods:{toggleEditor:function(){this.$emit("toggled")}},computed:{icon:function(){return this.isEditorShow?"fas fa-caret-left":"fas fa-caret-right"},reverseIcon:function(){return{reversed:!this.isEditorShow}}}},Gn=Zn,Yn=(n("0a2c"),Object(d["a"])(Gn,Jn,Bn,!1,null,"6a21c4bc",null)),Kn=Yn.exports;n("4160"),n("159b");function Xn(){var t=j.get("sample");return t}function Qn(t){var e=t._id?ar(t):sr(t);return e}function tr(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r._id===e)return r;if(r.children){var i=tr(r.children,e);if(i)return i}}}function er(t){var e=this;t._id=te.makeId(),t.children&&t.children.forEach((function(t){e.replaceIds(t)}))}function nr(t){var e=this,n={name:t.name,_id:t._id,class:t.class,children:[]};return t.children&&t.children.forEach((function(t){n.children.push(e.makeTree(t))})),n}function rr(t,e){for(var n=t.cmps||t.children,r=0;r<n.length;r++){var i=n[r];if(i._id===e)return t;if(i.children){var s=rr(i,e);if(s)return s}}}var ir={query:Xn,save:Qn,findByIdRecursive:tr,replaceIds:er,makeTree:nr,findParentNode:rr};function sr(t){return j.post("sample",t)}function ar(t){return console.log("getting to update"),j.put("sample/".concat(wap._id),t)}function or(t){var e=t?"?userId=".concat(t):"",n=j.get("wap".concat(e));return n}function cr(t){return j.get("wap/".concat(t))}function lr(t){return j.delete("wap/".concat(t))}function ur(t){console.log("wap",t);var e=t._id?dr(t):pr(t);return e}function pr(t){return j.post("wap",t)}function dr(t){return j.put("wap/".concat(t._id),t)}var mr={query:or,getById:cr,save:ur,remove:lr},fr={name:"editor",data:function(){return{currWap:null,currCmpToEdit:null,isEditorShow:!0,showPublishModal:!1,currWebsiteLink:null}},computed:{isEditorShown:function(){return{"hide-editor":!this.isEditorShow}},samples:function(){return this.$store.getters.sampleList},wapTree:function(){var t=this.getCurrWapTree();return t},isLoading:function(){return this.$store.getters.isLoading}},methods:{togglePublishModal:function(){this.showPublishModal=!this.showPublishModal},publishWebsite:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.saveWap();case 2:e.sent,console.log("wap is"),n="https://webcraft-ca.herokuapp.com/#/wap/".concat(t.currWap._id),console.log("link: ",n),t.currWebsiteLink=n,t.togglePublishModal();case 8:case"end":return e.stop()}}),e)})))()},copyCmp:function(t){var e=ir.findParentNode(this.currWap,t);this.copyCmpInsideParent(e,t)},deleteCmp:function(t){var e=ir.findParentNode(this.currWap,t);this.deleteCmpInsideParent(e,t)},moveCmp:function(t,e){var n=ir.findParentNode(this.currWap,t);this.moveCmpInsideParent(n,t,e)},deleteCmpInsideParent:function(t,e){var n=t.cmps||t.children,r=n.findIndex((function(t){return t._id===e}));n.splice(r,1)},moveCmpInsideParent:function(t,e,n){var r=t.cmps||t.children,i=r.findIndex((function(t){return t._id===e}));if(0!==i||-1!==n){var s=r.splice(i,1);r.splice(i+n,0,s[0])}},copyCmpInsideParent:function(t,e){var n=t.cmps||t.children,r=n.findIndex((function(t){return t._id===e})),i=n.find((function(t){return t._id===e})),s=JSON.parse(JSON.stringify(i));ir.replaceIds(s),n.splice(r,0,s)},setChangedVid:function(t){this.currCmpToEdit&&(this.currCmpToEdit.vidUrl=t)},emitChangedZoom:function(t){this.currCmpToEdit&&(this.currCmpToEdit.info.zoom=t)},getCurrWapTree:function(){var t=this.currWap.cmps.map((function(t){return ir.makeTree(t)}));return t},toggleEditor:function(){this.isEditorShow=!this.isEditorShow},setCmpToEdit:function(t){var e=ir.findByIdRecursive(this.currWap.cmps,t);this.currCmpToEdit=e},emptyCmpToEdit:function(){this.currCmpToEdit=null},updateTxt:function(t){this.currCmpToEdit.txt=t},deleteSection:function(t){var e=this.currWap.cmps.findIndex((function(e){return e._id===t}));this.currWap.cmps.splice(e,1)},copySection:function(t){var e=this.currWap.cmps.findIndex((function(e){return e._id===t})),n=this.currWap.cmps.find((function(e){return e._id===t})),r=JSON.parse(JSON.stringify(n));ir.replaceIds(r),this.currWap.cmps.splice(e,0,r)},dropSection:function(t){this.currWap.cmps=te.applyDrag(this.currWap.cmps,t)},moveSection:function(t,e){var n=this.currWap.cmps.findIndex((function(e){return e._id===t}));if(0!==n||-1!==e){var r=this.currWap.cmps.splice(n,1);this.currWap.cmps.splice(n+e,0,r[0])}},saveWap:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("in save wap function"),e.next=3,t.$store.dispatch({type:"saveWap",wap:t.currWap});case 3:t.currWap=e.sent;case 4:case"end":return e.stop()}}),e)})))()},dropSample:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch({type:"pickedSample",_id:t.payload._id});case 2:r=n.sent,i=JSON.parse(JSON.stringify(r)),ir.replaceIds(i),t.payload=i,e.dropSection(t);case 7:case"end":return n.stop()}}),n)})))()},saveSample:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getting to editor here"),console.log("pass this check"),e.next=4,t.$store.dispatch({type:"saveSample",sample:t.currWap});case 4:t.sample=e.sent;case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"loadSamples"});case 2:if(n=t.$route.params.id,!n){e.next=10;break}return e.next=6,t.$store.dispatch({type:"loadWap",_id:n});case 6:r=e.sent,t.currWap=r,e.next=11;break;case 10:t.currWap={name:"",cmps:[]};case 11:case"end":return e.stop()}}),e)})))()},components:{editorDashboard:yn,editorWorkspace:Hn,toggleEditor:Kn,loader:st,publishModal:mn}},hr=fr,gr=Object(d["a"])(hr,vt,bt,!1,null,null,null),vr=gr.exports,br=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[t.isLoading?n("loader"):n("wap-list",{attrs:{waps:t.waps},on:{addWap:t.pushEditor}})],1)},wr=[],Cr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wap-container grid"},[n("button",{staticClass:"addWap-btn btn",on:{click:t.emitAddWap}},[n("i",{staticClass:"fas fa-plus"})]),t._l(t.waps,(function(t){return n("wap-preview",{key:t._id,attrs:{wap:t}})}))],2)},yr=[],_r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wap-preview text-center"},[n("h3",{staticClass:"wap-title"},[t._v(t._s(t.wap.title))]),n("img",{attrs:{src:t.wap.thumbnail}}),n("div",{staticClass:"wap-prev-controls flex align-center space-around"},[n("router-link",{attrs:{to:"/wap/"+t.wap._id,title:"View Template"}},[n("i",{staticClass:"fas fa-eye"})]),n("router-link",{attrs:{to:"/editor/"+t.wap._id,title:"Edit Template"}},[n("i",{staticClass:"fas fa-pen"})])],1)])},xr=[],kr={name:"wap-preview",props:{wap:Object},methods:{enterWap:function(){},enterEditor:function(){}}},Sr=kr,Tr=Object(d["a"])(Sr,_r,xr,!1,null,null,null),Er=Tr.exports,$r={name:"wap-list",props:{waps:Array},components:{wapPreview:Er},methods:{emitAddWap:function(){this.$emit("addWap")}}},Ir=$r,Or=Object(d["a"])(Ir,Cr,yr,!1,null,null,null),Ur=Or.exports,jr={name:"wap-gallery",components:{wapList:Ur,loader:st},methods:{pushEditor:function(){this.$router.push("/editor")}},computed:{waps:function(){return this.$store.getters.getWaps},isLoading:function(){return this.$store.getters.isLoading}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch({type:"loadWaps"});case 2:case"end":return e.stop()}}),e)})))()}},Mr=jr,Pr=Object(d["a"])(Mr,br,wr,!1,null,null,null),Rr=Pr.exports,Wr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-details-container flex space-around"},[n("div",{staticClass:"user-area-container flex column"},[n("div",{staticClass:"user-circle"},[n("div",{staticClass:"user-img"},[n("img",{attrs:{src:t.imgUrl}})])]),n("div",{staticClass:"user-info flex column align-center"},[n("span",{staticClass:"name"},[n("i",{staticClass:"fas fa-user-circle"}),t._v(" "+t._s(t.loggedInUser.username))]),n("span",{staticClass:"email"},[n("i",{staticClass:"far fa-envelope"}),t._v(" "+t._s(t.loggedInUser.email))]),n("span",{staticClass:"created-at"},[t._v("Created at "+t._s(t.formatTime))])])]),n("div",{staticClass:"tab-container"},[n("button",{on:{click:function(e){return t.toggleTab("messages")}}},[t._v("Messages")]),n("button",{on:{click:function(e){return t.toggleTab("waps")}}},[t._v("Templates")]),n(t.currTab,{tag:"component",attrs:{msgs:t.msgs}})],1)])},Lr=[],Dr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-msg-container"},t._l(t.msgs,(function(e,r){return n("div",{key:r},[t._v(" "+t._s(e)+" ")])})),0)},Ar=[],Nr={name:"user-msgs",props:{msgs:Array},created:function(){}},Vr=Nr,zr=Object(d["a"])(Vr,Dr,Ar,!1,null,null,null),Fr=zr.exports,qr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Hr=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"user-waps"},[n("h1",[t._v("User waps here")])])}],Jr={name:"user-waps"},Br=Jr,Zr=Object(d["a"])(Br,qr,Hr,!1,null,null,null),Gr=Zr.exports,Yr={name:"user-profile",data:function(){return{msgs:[],selectedTab:"messages"}},methods:{toggleTab:function(t){this.selectedTab=t},setAvatar:function(t){var e=this;return Object(E["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,te.uploadImg(t);case 2:r=n.sent,console.log("url",r),e.loggedInUser.imgUrl=r.url,e.$store.dispatch({type:"updateUser",user:e.loggedInUser});case 6:case"end":return n.stop()}}),n)})))()}},computed:{currTab:function(){return"messages"===this.selectedTab?"user-msgs":"user-waps"},loggedInUser:function(){return this.$store.getters.loggedInUser},imgUrl:function(){return this.loggedInUser.imgUrl?this.loggedInUser.imgUrl:"https://robohash.org/".concat(this.loggedInUser._id,".png")},formatTime:function(){var t=this.loggedInUser.createdAt;return new Date(t).toLocaleString()}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,console.log("id of user in profile:",n),n&&t.$store.dispatch({type:"loadLoggedInUser",_id:n}),e.next=5,t.$store.dispatch({type:"getOwnerWapReviews",userId:n});case 5:r=e.sent,console.log("reviews from store:"),t.msgs=r;case 8:case"end":return e.stop()}}),e)})))()},components:{userMsgs:Fr,userWaps:Gr}},Kr=Yr,Xr=Object(d["a"])(Kr,Wr,Lr,!1,null,null,null),Qr=Xr.exports,ti=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.wapToShow?n("section",t._l(t.wapToShow.cmps,(function(e){return n("wap-renderer",{key:e._id,attrs:{cmp:e},on:{inputed:t.setInputValue,submit:t.sendReview}})})),1):t._e()},ei=[],ni=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.name,{tag:"component",staticClass:"render-class",class:t.cmp.class,style:t.cmp.style,attrs:{frameborder:"0",target:"_blank",src:t.urlSrc,info:t.getInfo,allowfullscreen:t.video,"data-key":t.cmp.dataset,placeholder:t.cmp.placeholder},on:{input:t.onInput,submit:t.submitReview,inputed:t.emitInputValue,click:function(e){return e.stopPropagation(),e.preventDefault(),t.onClick(e)}}},[t._v(" "+t._s(t.cmpTxt)+" "),t.cmp.children?t._l(t.cmp.children,(function(e){return n("wap-renderer",{key:e._id,attrs:{cmp:e},on:{submit:t.submitReview}})})):t._e()],2)},ri=[],ii={name:"wap-renderer",props:{cmp:{type:Object,required:!0}},data:function(){return{}},computed:{getInfo:function(){if(this.cmp.info)return this.cmp.info.isDraggable=!1,this.cmp.info},name:function(){var t=this.cmp.name;return"txt"===t?"span":"link"===t?"a":"vid"===t?"iframe":t},cmpTxt:function(){return this.cmp.txt||""},urlSrc:function(){return this.cmp.imgUrl?this.cmp.imgUrl:this.cmp.vidUrl?this.convertedUrl:""},convertedUrl:function(){if(this.cmp.vidUrl.includes("?v=")){var t=this.cmp.vidUrl.split("?v=")[1];return"https://www.youtube.com/embed/".concat(t)}return this.cmp.vidUrl},video:function(){return"iframe"===this.cmp.name}},methods:{onClick:function(){"link"===this.cmp.name&&this.sendToLink(),"button"===this.cmp.name&&this.submitReview()},submitReview:function(){this.$emit("submit")},sendToLink:function(){window.open(this.cmp.href)},onInput:function(t){var e=t.target.value,n=t.target.dataset.key;this.$emit("inputed",e,n)},emitInputValue:function(t,e){this.$emit("inputed",t,e)}},components:{googleMap:Un}},si=ii,ai=Object(d["a"])(si,ni,ri,!1,null,null,null),oi=ai.exports,ci={name:"wap",data:function(){return{wapToShow:null,inputValue:{}}},methods:{setInputValue:function(t,e){this.inputValue[e]=t},sendReview:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.getters.loggedInUser||"guest",r={_id:te.makeId(),payload:t.inputValue,byUser:n},t.wapToShow.reviews&&t.wapToShow.reviews.length||(t.wapToShow.reviews=[]),t.wapToShow.reviews.push(r),e.next=6,t.$store.dispatch({type:"saveWap",wap:t.wapToShow});case 6:t.inputValue={},i=document.querySelectorAll("input"),i.forEach((function(t){t.value=""})),s=document.querySelector("textArea"),s&&(s.value="");case 11:case"end":return e.stop()}}),e)})))()}},created:function(){var t=this;return Object(E["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$route.params.id,e.next=3,mr.getById(n);case 3:t.wapToShow=e.sent,t.$store.commit({type:"toggleUserSiteOpen"}),document.title=t.wapToShow.title;case 6:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit({type:"toggleUserSiteOpen"}),document.title="Webcraft"},components:{wapRenderer:oi}},li=ci,ui=Object(d["a"])(li,ti,ei,!1,null,null,null),pi=ui.exports,di=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section")},mi=[],fi={name:"playground",components:{}},hi=fi,gi=Object(d["a"])(hi,di,mi,!1,null,null,null),vi=gi.exports;r["default"].use(ut["a"]);var bi=[{path:"/",component:gt},{path:"/editor/:id?",component:vr},{path:"/wap",component:Rr},{path:"/wap/:id",component:pi},{path:"/user/:id",component:Qr},{path:"/playground",component:vi}],wi=new ut["a"]({mode:"hash",base:"/",routes:bi}),Ci=wi,yi=n("2f62"),_i=null;sessionStorage.user&&(_i=JSON.parse(sessionStorage.user));var xi={state:{loggedInUser:_i},getters:{loggedInUser:function(t){return t.loggedInUser}},mutations:{setUser:function(t,e){var n=e.user;t.loggedInUser=n}},actions:{signup:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.userCreds,n.next=4,R.signup(i);case 4:s=n.sent,r({type:"setUser",user:s});case 6:case"end":return n.stop()}}),n)})))()},login:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.userCreds,n.next=4,R.login(i);case 4:return s=n.sent,r({type:"setUser",user:s}),n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))()},logout:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,R.logout();case 2:t.commit({type:"setUser",user:null});case 3:case"end":return e.stop()}}),e)})))()},loadLoggedInUser:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e._id,n.next=4,R.getById(i);case 4:s=n.sent,r({type:"setUser",user:s});case 6:case"end":return n.stop()}}),n)})))()},updateUser:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,i=e.user,n.next=4,R.update(i);case 4:s=n.sent,r({type:"setUser",savedUser:s});case 6:case"end":return n.stop()}}),n)})))()}}},ki={state:{waps:[],currWapReviews:[]},getters:{getWaps:function(t){return t.waps.map((function(t){var e=t._id,n=t.thumbnail,r=t.title;return{_id:e,thumbnail:n,title:r}}))}},mutations:{setWaps:function(t,e){var n=e.waps;t.waps=n}},actions:{loadWaps:function(t){return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,n({type:"setIsLoading",isLoading:!0}),e.next=4,mr.query();case 4:r=e.sent,n({type:"setWaps",waps:r}),n({type:"setIsLoading",isLoading:!1});case 7:case"end":return e.stop()}}),e)})))()},loadWap:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e._id,t.next=3,mr.getById(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},saveWap:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.wap,t.next=3,mr.save(n);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})))()},getOwnerWapReviews:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,r=e.userId,n.next=4,mr.query(r);case 4:return i=n.sent,s=i.map((function(t){var e=t.thumbnail,n=t.reviews,r=t._id,i=t.title;return{wap:{thumbnail:e,_id:r,title:i},reviews:n}})),n.abrupt("return",s);case 7:case"end":return n.stop()}}),n)})))()}}},Si={state:{pickedSample:null,samples:[]},getters:{sampleList:function(t){return t.samples.map((function(t){var e=t._id,n=t.type,r=t.thumbnail,i=t.title;return{_id:e,type:n,thumbnail:r,title:i}}))},sampleToAdd:function(t){return t.pickedSample}},mutations:{setPickedSample:function(t,e){t.pickedSample=e},setSamples:function(t,e){var n=e.samples;t.samples=n}},actions:{loadSamples:function(t){return Object(E["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,ir.query();case 3:r=e.sent,n({type:"setSamples",samples:r});case 5:case"end":return e.stop()}}),e)})))()},saveSample:function(t,e){return Object(E["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.commit,n.next=3,ir.save(e);case 3:r=n.sent,console.log("saved sample:",r);case 5:case"end":return n.stop()}}),n)})))()},pickedSample:function(t,e){var n=t.commit,r=t.state,i=e._id,s=r.samples.find((function(t){return t._id===i}));return n({type:"setPickedSample",sample:s}),s}}};r["default"].use(yi["a"]);var Ti=new yi["a"].Store({strict:!0,state:{isUserSiteclosed:!0,isLoading:!1},getters:{isViewMode:function(t){return!t.isUserSiteclosed},isLoading:function(t){return t.isLoading}},mutations:{toggleUserSiteOpen:function(t){t.isUserSiteclosed=!t.isUserSiteclosed},setIsLoading:function(t,e){var n=e.isLoading;t.isLoading=n}},actions:{},modules:{userStore:xi,wapStore:ki,editorStore:Si}}),Ei=n("5c96"),$i=n.n(Ei),Ii=n("755e");n("0fae"),n("3ed1");r["default"].use($i.a),r["default"].use(Ii,{load:{key:"AIzaSyAb-nOgpqD_gjhW9jUy6raZW06HfTaFhPI",libraries:"places",region:"IL",language:"en"}}),r["default"].config.productionTip=!1,new r["default"]({router:Ci,store:Ti,render:function(t){return t(lt)}}).$mount("#app")},"5cc4":function(t,e,n){"use strict";n("8272")},"6a75":function(t,e,n){"use strict";n("3fac")},8272:function(t,e,n){},"8d80":function(t,e,n){"use strict";n("f427")},af84:function(t,e,n){t.exports=n.p+"img/signup-2.562f92f0.svg"},b617:function(t,e,n){t.exports=n.p+"img/temp-hero.88e767da.jpg"},be72:function(t,e,n){"use strict";n("55bd")},c1fd:function(t,e,n){"use strict";var r=n("e8d0"),i=n("f23c"),s=n("2877"),a=Object(s["a"])(i["default"],r["a"],r["b"],!1,null,null,null);e["default"]=a.exports},da53:function(t,e){},e8d0:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}));var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input-number",{attrs:{size:"small"},model:{value:t.num3,callback:function(e){t.num3=e},expression:"num3"}})},i=[]},f23c:function(t,e,n){"use strict";var r=n("da53"),i=n.n(r);e["default"]=i.a},f309:function(t,e,n){},f427:function(t,e,n){}});
//# sourceMappingURL=app.c7f921c0.js.map